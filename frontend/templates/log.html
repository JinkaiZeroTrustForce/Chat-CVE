<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat-CVE</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<link href="../static/log.css" rel="stylesheet">
</head>
<body>
  <div>
    <p> Total Score: {{evaluation_question.total_score}}</p>
    <p> Grade: {{evaluation_question.grade}}</p>
    <p> 講評: {{evaluation_question.summary}}</p>
  </div>
  <div class="chat-container">
    {% for i in range(global_index) %}
      <div class="chat-messages" id="chat-messages">
        <p><strong>LEVEL: {{ i+1 }}</strong></p>
        <div id="markdown-view"></div>
        <hr>
      </div>
    <div class="submitted-messege"><!--ここのhtmlは使いまわすので-->
      <p><strong>あなたの回答:</strong></p>
        <p>WHERE: {{ user_answers[i].where }}</p>
        <p>WHY: {{ user_answers[i].why }}</p>
        <hr>
        <p>WHERE score {{evaluation_question.per_item[i].position_score}}</p>
        <p>WHY score {{evaluation_question.per_item[i].reason_score}}</p>
        <o>フィードバック {{evaluation_question.per_item[i].feedback}}
        <hr>
    </div>
    <div class="answer">
      <p><strong>模範解答:</strong> {{ global_questions[i].answer }}</p>
      <p><strong>解説:</strong> {{ global_questions[i].explanation }}</p>
    </div>
    <hr>
    <script>
    // markdownテキスト（サーバー側から出力してもOK）
    var src = {{ global_questions[i].source_code | tojson }};
    document.getElementById('markdown-view').innerHTML = marked.parse(src);
    </script>
    
      {% endfor %}
  </div>
  <div class="input-area">
    <div class-"button-area">
      <form action="http://127.0.0.1:5000/" method="get">
        <button type="submit" class="btn btn-primary mb-3">ホーム画面に戻る</button>
      </form>
    </div>
  </div>

</body>
</html>